"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.loadServices = loadServices;
exports.loadService = loadService;

var _service = require("./service");

var _service2 = _interopRequireDefault(_service);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
* load all services in directory.
* @method
* @param {object} expressInst - the express context
* @param {string} service - the full path of the service directory
*/
function loadServices(expressInst, serviceDirPath) {
  var relativeServicesDirPath = path.join(__dirname, serviceDirPath);
  require("fs").readdirSync(relativeServicesDirPath).forEach(function (file) {
    if (path.extname(file) === ".js") {
      //do something
      var _Service = require(path.join(relativeServicesDirPath, file));
      var service = new _Service();
      loadService(express, service);
    }
  });
};

/**
* load a service.
* @method
* @param {object} expressInst - the express application
* @param {object} service - the service
*/
function loadService(expressInst, service) {
  if (service[_service2.default.loadFct]) {
    service[_service2.default.loadFct].call(service, expressInst);
  }
};